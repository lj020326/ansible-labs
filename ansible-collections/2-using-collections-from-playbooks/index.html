<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="description" content="Ansible and Ansible Tower Labs">
<meta name="author" content="Christian, Eric, GÃ¶tz, Ismail, Joachim">

    <link rel="icon" href="https://lj020326.github.io/images/favicon.png" type="image/png">

    <title>Collections from Playbook :: Ansible Labs for AnsibleFest</title>

    
    <link href="https://lj020326.github.io/css/nucleus.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/fontawesome-all.min.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/hybrid.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/featherlight.min.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/perfect-scrollbar.min.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/auto-complete.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/atom-one-dark-reasonable.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/theme.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/tabs.css?1647023136" rel="stylesheet">
    <link href="https://lj020326.github.io/css/hugo-theme.css?1647023136" rel="stylesheet">
    
    <link href="https://lj020326.github.io/css/theme-red.css?1647023136" rel="stylesheet">
    
    

    <script src="https://lj020326.github.io/js/jquery-3.3.1.min.js?1647023136"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="https://lj020326.github.io/ansible-collections/2-using-collections-from-playbooks/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://lj020326.github.io/">
  <img src="https://lj020326.github.io/images/email_ansiblefest-2020.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://lj020326.github.io/js/lunr.min.js?1647023136"></script>
<script type="text/javascript" src="https://lj020326.github.io/js/auto-complete.js?1647023136"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/lj020326.github.io\/";
    
</script>
<script type="text/javascript" src="https://lj020326.github.io/js/search.js?1647023136"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='https://lj020326.github.io/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/ansible-getting-started/" title="Ansible Getting Started" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/">
          Ansible Getting Started
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/1-setup/" title="Check the Prerequisites" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/1-setup/">
          Check the Prerequisites
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/2-adhoc/" title="Running ad hoc commands" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/2-adhoc/">
          Running ad hoc commands
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/3-playbook/" title="Writing Your First Playbook" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/3-playbook/">
          Writing Your First Playbook
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/4-variables/" title="Using Variables" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/4-variables/">
          Using Variables
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/5-handlers/" title="Conditionals, Handlers and Loops" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/5-handlers/">
          Conditionals, Handlers and Loops
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/6-templates/" title="Templates" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/6-templates/">
          Templates
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-getting-started/7-bonus/" title="Bonus Labs" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-getting-started/7-bonus/">
          Bonus Labs
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/" title="Ansible Tower Getting Started" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/">
          Ansible Tower Getting Started
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/1-intro/" title="Introduction to Tower" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/1-intro/">
          Introduction to Tower
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/2-cred/" title="Inventories, credentials and ad hoc commands" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/2-cred/">
          Inventories, credentials and ad hoc commands
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/3-projects/" title="Projects &amp; job templates" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/3-projects/">
          Projects &amp; job templates
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/4-surveys/" title="Surveys" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/4-surveys/">
          Surveys
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/5-rbac/" title="Role-based access control" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/5-rbac/">
          Role-based access control
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/6-workflows/" title="Workflows" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/6-workflows/">
          Workflows
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-getting-started/7-wrap/" title="Wrap up" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-getting-started/7-wrap/">
          Wrap up
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ansible-tower-advanced/" title="Ansible Tower Advanced" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/">
          Ansible Tower Advanced
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/1-intro/" title="Ansible Tower Advanced" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/1-intro/">
          Ansible Tower Advanced
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/2-clustering/" title="Introduction to Ansible Tower Clustering" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/2-clustering/">
          Introduction to Ansible Tower Clustering
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/3-awx-cli-intro/" title="There is more to Tower than the Web UI" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/3-awx-cli-intro/">
          There is more to Tower than the Web UI
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/4-awx-cli-exercises/" title="Creating Tower Objects Using `awx`" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/4-awx-cli-exercises/">
          Creating Tower Objects Using `awx`
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/5-tower-cluster-jobs/" title="Run a Job in a Cluster" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/5-tower-cluster-jobs/">
          Run a Job in a Cluster
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/6-instance-groups/" title="Tower Instance Groups" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/6-instance-groups/">
          Tower Instance Groups
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/7-parallel-jobs/" title="Parallel Jobs" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/7-parallel-jobs/">
          Parallel Jobs
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/8-isolated-nodes/" title="Isolated Nodes" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/8-isolated-nodes/">
          Isolated Nodes
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/9-advanced-inventories/" title="Advanced Inventories" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/9-advanced-inventories/">
          Advanced Inventories
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/10-structured-content/" title="Well Structured Content Repositories" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/10-structured-content/">
          Well Structured Content Repositories
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-tower-advanced/11-rest-api/" title="Discovering the Tower API" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-tower-advanced/11-rest-api/">
          Discovering the Tower API
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ansible-collections/" title="Ansible Collections" class="dd-item
        parent
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/">
          Ansible Collections
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/1-introduction/" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/1-introduction/">
          Introduction
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/2-using-collections-from-playbooks/" title="Collections from Playbook" class="dd-item
        parent
        active
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/2-using-collections-from-playbooks/">
          Collections from Playbook
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/3-using-collections-from-roles/" title="Collections from Roles" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/3-using-collections-from-roles/">
          Collections from Roles
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/4-using-collections-from-tower/" title="Collections in Tower" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/4-using-collections-from-tower/">
          Collections in Tower
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/5-creating-collections/" title="Creating Collections" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/5-creating-collections/">
          Creating Collections
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/6-automation-hub-and-galaxy/" title="Use Automation Hub" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/6-automation-hub-and-galaxy/">
          Use Automation Hub
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/ansible-collections/6-automation-hub-and-galaxy/screenshots/" title="" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/ansible-collections/6-automation-hub-and-galaxy/screenshots/">
          
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vscode-intro/" title="Visual Studio Code - Introduction" class="dd-item
        
        
        
        ">
      <a href="https://lj020326.github.io/vscode-intro/">
          Visual Studio Code - Introduction
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://lj020326.github.io/"><i class='fas fa-home'></i> Homepage</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p></p>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='https://lj020326.github.io/'></a> > <a href='https://lj020326.github.io/ansible-collections/'>Ansible Collections</a> > Collections from Playbook
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#install-the-ansible-collection">Install the Ansible Collection</a></li>
    <li><a href="#browse-the-documentation">Browse the Documentation</a></li>
    <li><a href="#write-an-ansible-playbook">Write an Ansible Playbook</a></li>
    <li><a href="#test-the-playbook">Test the playbook</a></li>
    <li><a href="#simplify-the-namespace">Simplify the namespace</a></li>
    <li><a href="#test-the-change">Test the change</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Collections from Playbook
            </h1>
          

        



	<p>For the following exercise, we will use a collection written by the Ansible Core Team. The name of the author is therefore &ldquo;ansible&rdquo;. You can find a list of all modules and collections written by the Ansible Core Team on <a href="https://galaxy.ansible.com/ansible">Ansible Galaxy</a>. Head over there and have a good look around!</p>
<p>As you can see they maintain several collections and roles. One of their collections is called &ldquo;posix&rdquo; and we can find the documentation and additional details on the <a href="https://galaxy.ansible.com/ansible/posix">Ansible Galaxy POSIX Collection</a> page.</p>
<p>One of the modules provided by this collection allows us to manage <a href="https://www.redhat.com/en/topics/linux/what-is-selinux">SELinux</a> settings. The fully qualified collection name for this module is therefore <code>ansible.posix.selinux</code>.</p>
<p>You can find more details about <a href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html">using collections</a> in the <a href="https://docs.ansible.com/">Ansible Documentation</a>.</p>
<h2 id="install-the-ansible-collection">Install the Ansible Collection</h2>
<p>The <code>ansible.posix.selinux</code> module which we want to use for this exercise, is part of the <code>ansible.posix</code> collection. We have to install this collection first, before we can use its modules. The <code>ansible-galaxy</code> command line tool can be used to automate the installation. It is preconfigured to search for roles and collections on <a href="https://galaxy.ansible.com/">Ansible Galaxy</a> so we can just specify the collection name and it will take care of the rest.</p>
<p>Bring up a browser window with <strong>code-server</strong> and open a terminal. In the terminal run:</p>
<pre><code>[student@ansible-1 ~]$ ansible-galaxy collection install ansible.posix
</code></pre>
<p>This will install the collection on your system, only if it wasn&rsquo;t installed before. To force the installation, for example to make sure you&rsquo;re on the latest version, you can add the force switch <code>-f</code>.</p>
<pre><code>[student@ansible-1 ~]$ ansible-galaxy collection install -f ansible.posix
</code></pre>
<p>This will always download and install the latest version, even if it was already up to date. Ansible Collections can have dependencies for other Ansible Collections as well - if you want to make sure those dependencies are refreshed as well, you can use the <code>--force-with-deps</code> switch.</p>
<p>By default the installation is stored in your local <code>~/.ansible</code> directory. This can be overwritten by using the <code>-p /path/to/collection</code> switch. Keep in mind though that <code>ansible-playbook</code> will only use this directory, if you change your <code>ansible.cfg</code> accordingly. To check your current configuration, you can dump your configuration and search for <code>collection</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>student@ansible-1 ~<span style="color:#f92672">]</span>$ ansible-config dump | grep -i collection
COLLECTIONS_PATHS<span style="color:#f92672">(</span>default<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;/home/student&lt;N&gt;/.ansible/collections&#39;</span>, <span style="color:#e6db74">&#39;/usr/share/ansible/collections&#39;</span><span style="color:#f92672">]</span>
</code></pre></div><h2 id="browse-the-documentation">Browse the Documentation</h2>
<p>The <code>ansible-doc</code> command only searches the system directories for documentation. You can still use it though to read up on modules you installed from Ansible Collections by using the fully qualified collection name.</p>
<p>Let&rsquo;s have a look at the module documentation for the <code>selinux</code> module of the <code>ansible.posix</code> collection, which we are going to use in the next part of the exercise:</p>
<pre><code>[student@ansible-1 ~]$ ansible-doc ansible.posix.selinux
&gt; SELINUX    (/home/student&lt;N&gt;/.ansible/collections/ansible_collections/ansible/posix/plugins/modules/selinux.py)
</code></pre>
<p>Note the start of the output, you can see the location of the module. For educational purposes run the <code>ansible-doc</code> again, but this time not specifying the collection:</p>
<pre><code>[student@ansible-1 ~]$ ansible-doc selinux
&gt; SELINUX    (/usr/lib/python3.6/site-packages/ansible/modules/system/selinux.py)
</code></pre>
<p>You can see how the command this time pulled the documentation for the module that was installed with Ansible.</p>

<div class="notices note" ><p>Depending on your screen resolution you might have to press <code>q</code> to leave the documentation viewer.</p>
</div>

<h2 id="write-an-ansible-playbook">Write an Ansible Playbook</h2>
<p>We want to use the SELinux module to make sure it is configured in enforcing mode. SELinux is a kernel feature which brings extra security to our Linux system and it is highly recommended to always keep it enabled and in enforcing mode. If you&rsquo;re new to SELinux, there is a nice article on <a href="https://www.redhat.com/en/topics/linux/what-is-selinux">What is SELinux</a> to get you started.</p>
<p>Let&rsquo;s write a simple playbook which enables SELinux and sets it to enforcing mode on the local machine. In this lab you can use the visual <strong>code-server</strong> editor or run an editor of your choice from the terminal. Create the Playbook <code>enforce-selinux.yml</code> with the following content:</p>
<pre tabindex="0"><code>---
- name: set SELinux to enforcing
  hosts: localhost
  become: yes
  tasks:
  - name: set SElinux to enforcing
    ansible.posix.selinux:
      policy: targeted
      state: enforcing
</code></pre><p>Make sure you save the playbook as <code>enforce-selinux.yml</code> in your student users home directory.</p>

<div class="notices note" ><p>Pay special attention to the module name. Typically you would see something like <code>selinux</code>, but since we are using a module provided by an Ansible Collection, we have to specify the fully qualified collection name.</p>
</div>

<h2 id="test-the-playbook">Test the playbook</h2>
<p>Noe let&rsquo;s run the Playbook and see what happens:</p>
<pre><code>[student@ansible-1 ~]$ ansible-playbook enforce-selinux.yml
</code></pre>
<p>You should see output like this:</p>
<pre><code>[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

PLAY [set SELinux to enforcing] ***********************************************************************************

TASK [Gathering Facts] ********************************************************************************************
ok: [localhost]

TASK [set SElinux to enforcing] ***********************************************************************************
ok: [localhost]

PLAY RECAP ********************************************************************************************************
localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
</code></pre>
<p>If SELinux was not set to enforcing mode before, you might see &ldquo;changed&rdquo; instead of &ldquo;ok&rdquo;. If it did say &ldquo;changed&rdquo; and you run it a second time, you should now see &ldquo;ok&rdquo; - the magic of <a href="https://docs.ansible.com/ansible/latest/reference_appendices/glossary.html">Ansible idempotency</a>.</p>
<h2 id="simplify-the-namespace">Simplify the namespace</h2>
<p>If you use many modules from Ansible Collections in your Playbook, the &lt;author&gt;.&lt;collection&gt; prefix can become quite annoying and reading your Playbook can become harder as well.</p>
<p>You can use the <code>collections</code> keyword to skip defining the namespace with every task. In your terminal edit the Playbook <code>enforce-selinux.yml</code> to look like this, basically adding the <code>collections:</code> section and changing the module name from FQCN to the simple module name:</p>
<pre tabindex="0"><code>---
- name: set SELinux to enforcing
  hosts: localhost
  become: yes
  collections:
  - ansible.posix
  tasks:
  - name: set SElinux to enforcing
    selinux:
      policy: targeted
      state: enforcing
</code></pre>
<div class="notices tip" ><p>Although the syntax looks similar to how you specify roles, this works different. They keyword <code>roles</code> will execute the <code>tasks/main.yml</code> in each role. The <code>collections</code> keyword is merely a shortcut so you can skip the author and namespace every time you use a module in a task.</p>
</div>

<h2 id="test-the-change">Test the change</h2>
<p>Now run the Playbook again, you shouldn&rsquo;t see any difference in the output. As explained before, the <code>collections</code> keyword only simplifies writing your Playbook!</p>

<div class="notices warning" ><p>We are explaining the <code>collections</code> keyword here for completeness. It is however recommended to always use the fully qualified collection name. The internal lookup can deliver unexpected results if there are many overlapping or overriding module names, which can be avoided by always using the full name. Since most modern code editors provide auto completion, it&rsquo;s not too much of an issue when typing the code either.</p>
</div>






<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://lj020326.github.io/ansible-collections/1-introduction/" title="Introduction"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://lj020326.github.io/ansible-collections/3-using-collections-from-roles/" title="Collections from Roles" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://lj020326.github.io/js/clipboard.min.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/perfect-scrollbar.min.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/perfect-scrollbar.jquery.min.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/jquery.sticky.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/featherlight.min.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/highlight.pack.js?1647023136"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://lj020326.github.io/js/modernizr.custom-3.6.0.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/learn.js?1647023136"></script>
    <script src="https://lj020326.github.io/js/hugo-learn.js?1647023136"></script>
    
        
            <script src="https://lj020326.github.io/mermaid/mermaid.js?1647023136"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
